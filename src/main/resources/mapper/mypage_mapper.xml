<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>

<mapper namespace="kr.co.porkandspoon.dao.MyPageDAO">

	<!-- 마이페이지 정보 조회 -->
	<select id="myPageDetail" parameterType="String" resultType="kr.co.porkandspoon.dto.UserDTO">
		SELECT u.username, u.person_num, u.name, u.email, u.birth, u.phone, u.company_num, u.address, u.gender, u.join_date, u.leave_date, u.position, u.parent, u.title, c.content AS position_content, d.`text` AS dept_name, f.new_filename AS profile
			FROM user u LEFT JOIN code c ON u.position = c.name
				LEFT JOIN department d ON u.parent = d.id 
				LEFT JOIN file f ON u.username = f.pk_idx AND f.code_name = 'up100'
			WHERE u.username = #{username}
	</select>

	<!-- 직원 이력 조회 -->
	<select id="myPageCareerDetail" resultType="kr.co.porkandspoon.dto.CareerDTO" parameterType="String">
		SELECT username, type, subject, content, start_date, end_date FROM career WHERE username = #{username}
	</select>
</mapper>